# 虚拟货架可视化模块设计说明

## 1. 项目概述

### 1.1 项目背景
虚拟货架可视化模块是智慧仓储系统的重要组成部分，提供直观的仓储状态可视化展示，帮助仓储管理人员快速了解库存分布、状态监控和操作追溯。

### 1.2 主要目标
- 实现仓储货架的3D可视化展示
- 提供实时库存状态监控
- 支持精确的货位搜索定位
- 实现完整的物料生命周期追溯
- 提供便捷的仓储操作入口

## 2. 功能特性

### 2.1 核心功能
- **货架可视化**: 以网格布局展示仓储货架及货位分布
- **库存状态监控**: 实时显示货位占用、空闲和预警状态
- **精准搜索**: 支持按物料名称、编号、货位编码进行搜索
- **详情查看**: 点击货位查看详细的物料信息和操作历史
- **生命周期追溯**: 展示物料的完整生命周期记录
- **实时监控**: 集成视频监控和历史回放功能

### 2.2 用户交互
- **货位选择**: 点击任意货位查看详情信息
- **搜索定位**: 输入关键词快速定位目标货位
- **状态筛选**: 通过颜色编码区分不同状态
- **操作入口**: 提供移库、出库等操作快捷入口

## 3. 技术架构

### 3.1 技术栈
- **前端框架**: Vue.js 3.0 (Composition API)
- **样式框架**: Tailwind CSS
- **图标库**: Font Awesome 6.0
- **开发模式**: 单页面应用 (SPA)

### 3.2 架构特点
- **响应式设计**: 支持多种屏幕尺寸自适应
- **组件化开发**: 模块化组件设计，便于维护和扩展
- **状态管理**: Vue响应式数据管理
- **动画效果**: CSS3动画提升用户体验

### 3.3 文件结构
```
虚拟货架.html
├── HTML结构
│   ├── 头部导航栏
│   ├── 货架展示区域
│   ├── 状态栏
│   └── 侧边详情面板
├── Vue.js应用
│   ├── 数据模型
│   ├── 交互方法
│   └── 生命周期钩子
└── 样式定义
    ├── 基础样式
    ├── 动画效果
    └── 响应式布局
```

## 4. 数据结构设计

### 4.1 货架数据模型
```javascript
{
  id: "S01",           // 货架唯一标识
  code: "A-01货架",     // 货架编码
  type: "重型货架",     // 货架类型
  bins: [Bin]         // 货位数组
}
```

### 4.2 货位数据模型
```javascript
{
  id: 101,                    // 货位唯一标识
  code: "A-01-1-1",           // 货位编码
  material: "高性能CPU i9",     // 物料名称
  matId: "M-8821",           // 物料ID
  qty: 50,                   // 库存数量
  unit: "盒",                 // 单位
  batch: "B20231011",        // 批次号
  status: "normal",          // 状态: normal/warning
  icon: "fa-microchip"       // 图标样式
}
```

### 4.3 状态定义
- **normal**: 正常状态 (绿色显示)
- **warning**: 预警状态 (红色显示)
- **empty**: 空置状态 (灰色显示)

## 5. 用户界面设计

### 5.1 界面布局
- **顶部导航栏**: 包含标题、搜索框和状态图例
- **主展示区域**: 货架网格布局展示
- **侧边面板**: 货位详情信息展示
- **底部状态栏**: 系统状态和数据更新时间

### 5.2 视觉设计
- **颜色系统**:
  - 正常状态: 绿色系 (emerald)
  - 预警状态: 红色系 (red)
  - 空置状态: 灰色系 (slate)
  - 选中状态: 蓝色系 (blue)

- **交互反馈**:
  - 悬停效果: 缩放和阴影变化
  - 选中状态: 边框高亮和缩放
  - 搜索匹配: 脉冲动画效果

### 5.3 响应式适配
- **桌面端**: 4列网格布局
- **平板端**: 3列网格布局
- **移动端**: 2列网格布局

## 6. 核心功能实现

### 6.1 货位选择功能 (XN-002)
```javascript
selectBin(bin) {
  this.currentBin = bin;
  // 调用后端API获取实时详情
  console.log('Use Case XN-002: Querying details for bin', bin.code);
}
```
**功能说明**: 点击货位时切换选中状态并展示详情面板

### 6.2 搜索定位功能 (XN-003)
```javascript
isMatch(bin) {
  if (!this.searchKeyword || !bin.material) return false;
  const kw = this.searchKeyword.toLowerCase();
  return bin.material.toLowerCase().includes(kw) ||
         bin.code.toLowerCase().includes(kw) ||
         bin.matId.toLowerCase().includes(kw);
}
```
**功能说明**: 支持按物料名称、货位编码、物料ID进行模糊搜索

### 6.3 数据刷新机制 (XN-007)
```javascript
mounted() {
  setInterval(() => {
    this.lastUpdateTime = new Date().toLocaleTimeString();
    // 模拟库存数据更新
  }, 30000);
}
```
**功能说明**: 每30秒自动更新显示时间，可扩展为实时数据同步

## 7. 物料追溯功能

### 7.1 追溯信息展示
- **盘点记录**: 显示最近的库存盘点操作
- **出入库记录**: 展示物料的出入库历史
- **操作人员**: 记录每次操作的执行人员
- **关联单号**: 链接相关的业务单据

### 7.2 时间线设计
采用垂直时间线布局，直观展示物料生命周期：
- 蓝色圆点: 当前操作
- 灰色圆点: 历史操作
- 绿色圆点: 入库操作

## 8. 监控集成功能

### 8.1 视频监控
- **实时预览**: 显示当前货位的监控画面
- **历史回放**: 支持点击播放历史监控录像
- **高清画质**: 使用Unsplash高质量图片模拟

### 8.2 监控布局
- **覆盖层设计**: 视频画面作为背景
- **播放控件**: 居中显示播放按钮
- **交互提示**: 悬停时显示操作提示

## 9. 操作入口设计

### 9.1 快捷操作
- **移库操作**: 在不同货位间移动物料
- **出库下架**: 执行物料出库操作
- **入库分配**: 为新到物料分配货位

### 9.2 操作按钮布局
- 网格布局: 2列操作按钮
- 视觉层次: 主要操作使用蓝色，次要操作使用灰色
- 响应反馈: 悬停和点击状态变化

## 10. 扩展性设计

### 10.1 数据源扩展
- **API集成**: 可轻松对接后端RESTful API
- **WebSocket**: 支持实时数据推送
- **数据缓存**: 本地存储历史查询结果

### 10.2 功能扩展
- **3D可视化**: 可升级为Three.js 3D展示
- **批量操作**: 支持多货位批量操作
- **权限控制**: 集成用户权限管理系统
- **报表导出**: 支持数据导出功能

### 10.3 性能优化
- **虚拟滚动**: 大规模货架数据的虚拟化加载
- **懒加载**: 图片和详情数据的按需加载
- **缓存策略**: 搜索结果和常用数据的缓存

## 11. 部署和维护

### 11.1 部署要求
- **Web服务器**: 支持静态文件服务的Web服务器
- **浏览器兼容**: 现代浏览器 (Chrome, Firefox, Safari, Edge)
- **网络要求**: 支持HTTPS和WebSocket (可选)

### 11.2 维护建议
- **数据备份**: 定期备份货架配置和历史数据
- **性能监控**: 监控页面加载时间和用户交互响应
- **用户反馈**: 收集用户使用反馈持续优化

## 12. 总结

虚拟货架可视化模块通过直观的可视化界面和丰富的交互功能，为智慧仓储系统提供了强大的库存管理工具。该模块采用现代前端技术栈，具有良好的可扩展性和维护性，能够满足企业级仓储管理的需求。

---

**文档版本**: 1.0
**最后更新**: 2024年1月9日
**作者**: 系统设计师

